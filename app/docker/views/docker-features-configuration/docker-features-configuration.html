<rd-header>
  <rd-header-title title-text="Docker features configuration"></rd-header-title>
  <rd-header-content>Docker configuration</rd-header-content>
</rd-header>

<div class="row">
  <div class="col-sm-12">
    <rd-widget>
      <rd-widget-body>
        <form class="form-horizontal" name="$ctrl.form">
          <div class="col-sm-12 form-section-title">
            Host and Filesystem
          </div>
          <div class="form-group">
            <div class="col-sm-12">
              <label for="toggle_enableHostManagementFeatures" class="control-label text-left">
                Enable host management features
                <portainer-tooltip position="bottom" message="Enable host management features: host system browsing and advanced host details."></portainer-tooltip>
              </label>
              <label class="switch" style="margin-left: 20px;">
                <input type="checkbox" name="toggle_enableHostManagementFeatures" ng-model="$ctrl.formValues.enableHostManagementFeatures" /><i></i>
              </label>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-12">
              <label for="toggle_allowVolumeBrowserForRegularUsers" class="control-label text-left">
                Enable volume management for non-administrators
                <portainer-tooltip position="bottom" message="When enabled, regular users will be able to use Portainer volume management features."></portainer-tooltip>
              </label>
              <label class="switch" style="margin-left: 20px;">
                <input type="checkbox" name="toggle_allowVolumeBrowserForRegularUsers" ng-model="$ctrl.formValues.allowVolumeBrowserForRegularUsers" /><i></i>
              </label>
            </div>
          </div>
          <!-- !host-filesystem -->
          <!-- security -->
          <div class="col-sm-12 form-section-title">
            Docker Endpoint Security Options
          </div>
          <div class="form-group">
            <div class="col-sm-12">
              <label for="toggle_disableBindMountsForRegularUsers" class="control-label text-left">
                Disable bind mounts for non-administrators
                <portainer-tooltip position="bottom" message="When enabled, regular users will not be able to use bind mounts when creating containers."></portainer-tooltip>
              </label>
              <label class="switch" style="margin-left: 20px;">
                <input type="checkbox" name="toggle_disableBindMountsForRegularUsers" ng-model="$ctrl.formValues.disableBindMountsForRegularUsers" /><i></i>
              </label>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-12">
              <label for="toggle_disablePrivilegedModeForRegularUsers" class="control-label text-left">
                Disable privileged mode for non-administrators
                <portainer-tooltip position="bottom" message="When enabled, regular users will not be able to use privileged mode when creating containers."></portainer-tooltip>
              </label>
              <label class="switch" style="margin-left: 20px;">
                <input type="checkbox" name="toggle_disablePrivilegedModeForRegularUsers" ng-model="$ctrl.formValues.disablePrivilegedModeForRegularUsers" /><i></i>
              </label>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-12">
              <label for="toggle_disableHostNamespaceForRegularUsers" class="control-label text-left">
                Disable the use of host PID 1 for non-administrators
                <portainer-tooltip position="bottom" message="Prevent users from accessing the host filesystem through the host PID namespace."></portainer-tooltip>
              </label>
              <label class="switch" style="margin-left: 20px;">
                <input type="checkbox" name="toggle_disableHostNamespaceForRegularUsers" ng-model="$ctrl.formValues.disableHostNamespaceForRegularUsers" /><i></i>
              </label>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-12">
              <label for="toggle_disableStackManagementForRegularUsers" class="control-label text-left">
                Disable the use of Stacks for non-administrators
              </label>
              <label class="switch" style="margin-left: 20px;">
                <input type="checkbox" name="toggle_disableStackManagementForRegularUsers" ng-model="$ctrl.formValues.disableStackManagementForRegularUsers" /><i></i>
              </label>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-12">
              <label for="toggle_disableDeviceMappingForRegularUsers" class="control-label text-left">
                Disable device mappings for non-administrators
              </label>
              <label class="switch" style="margin-left: 20px;">
                <input type="checkbox" name="toggle_disableDeviceMappingForRegularUsers" ng-model="$ctrl.formValues.disableDeviceMappingForRegularUsers" /><i></i>
              </label>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-12">
              <label for="toggle_disableContainerCapabilitiesForRegularUsers" class="control-label text-left">
                Disable container capabilities for non-administrators
              </label>
              <label class="switch" style="margin-left: 20px;">
                <input type="checkbox" name="toggle_disableContainerCapabilitiesForRegularUsers" ng-model="$ctrl.formValues.disableContainerCapabilitiesForRegularUsers" /><i></i>
              </label>
            </div>
          </div>

          <div class="form-group" ng-if="isContainerEditDisabled()">
            <span class="col-sm-12 text-muted small">
              Note: The recreate/duplicate/edit feature is currently disabled (for non-admin users) by one or more security settings.
            </span>
          </div>
          <!-- !security -->

          <!-- actions -->
          <div class="col-sm-12 form-section-title">
            Actions
          </div>
          <div class="form-group">
            <div class="col-sm-12">
              <button type="button" class="btn btn-primary btn-sm" ng-click="$ctrl.save()" ng-disabled="$ctrl.state.actionInProgress" button-spinner="$ctrl.state.actionInProgress">
                <span ng-hide="$ctrl.state.actionInProgress">Save configuration</span>
                <span ng-show="$ctrl.state.actionInProgress">Saving...</span>
              </button>
            </div>
          </div>
          <!-- !actions -->
        </form>
      </rd-widget-body>
    </rd-widget>
  </div>
</div>
