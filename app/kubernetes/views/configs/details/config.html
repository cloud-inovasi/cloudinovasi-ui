<rd-header>
  <rd-header-title title-text="Config details">
    <a data-toggle="tooltip" title="Refresh" ui-sref="kubernetes.configs.config" ui-sref-opts="{reload: true}">
      <i class="fa fa-sync" aria-hidden="true"></i>
    </a>
  </rd-header-title>
  <rd-header-content>
    <a ui-sref="kubernetes.configs">Configs</a> &gt; <a ui-sref="kubernetes.configs.config" ui-sref-opts="{reload: true}">{{ ctrl.config.Name }}</a>
  </rd-header-content>
</rd-header>

<div class="row">
  <div class="col-lg-12 col-md-12 col-xs-12">
    <rd-widget>
      <rd-widget-header icon="fa-file-code" title-text="Config status">
        <span class="btn-group btn-group-sm">
          <label class="btn btn-primary" ng-model="ctrl.state.DisplayedPanel" uib-btn-radio="'details'"><i class="fa fa-info-circle space-right" aria-hidden="true"></i>Details</label>
          <label class="btn btn-primary" ng-model="ctrl.state.DisplayedPanel" uib-btn-radio="'events'"><i class="fa fa-history space-right" aria-hidden="true"></i>Events</label>
          <label class="btn btn-primary" ng-model="ctrl.state.DisplayedPanel" uib-btn-radio="'yaml'"><i class="fa fa-code space-right" aria-hidden="true"></i>Yaml</label>
        </span>
      </rd-widget-header>
      <rd-widget-body classes="no-padding">
        <table class="table">
          <tbody>
            <tr>
              <td>Name</td>
              <td>{{ ctrl.config.Name }}</td>
            </tr>
            <tr>
              <td>Namespace</td>
              <td>{{ ctrl.config.Namespace }}</td>
            </tr>
            <tr>
              <td>Creation date</td>
              <td>{{ ctrl.config.CreatedAt | getisodate }}</td>
            </tr>
            <tr>
              <td>Labels</td>
              <td ng-if="ctrl.config.Labels">
                <span ng-repeat="(key, value) in ctrl.config.Labels" class="tag">
                  {{ key }}={{ value }}
                </span>
              </td>
              <td ng-if="!ctrl.config.Labels">-</td>
            </tr>
          </tbody>
        </table>
      </rd-widget-body>
    </rd-widget>
  </div>
</div>

<div class="row" ng-if="ctrl.config.Data" ng-show="ctrl.state.DisplayedPanel === 'details'">
  <div class="col-sm-12">
    <rd-widget>
      <rd-widget-header icon="fa-file-code" title-text="Config content"></rd-widget-header>
      <rd-widget-body>
        <ul class="nav nav-pills nav-justified">
          <li ng-repeat="(key, value) in ctrl.config.Data" ng-class="{interactive: true, active: key === ctrl.selectedData.Key}" ng-click="ctrl.changeEditorContent(key)">
            <a data-toggle="tab">{{key}}</a>
          </li>
        </ul>
        <div class="tab-content">
          <pre>{{ ctrl.selectedData.Value }}</pre>
        </div>
      </rd-widget-body>
    </rd-widget>
  </div>
</div>

<div class="row" ng-show="ctrl.state.DisplayedPanel === 'events'">
  <div class="col-sm-12">
    <kubernetes-events-datatable
    title-text="Events" title-icon="fa-history"
    dataset="ctrl.events" table-key="kubernetes.config.events"
    order-by="Date"
    reverse-order="true"
    loading="ctrl.state.eventsLoading"
    refresh-callback="ctrl.getEvents"
    ></kubernetes-events-datatable>
  </div>
</div>
  

<div class="row" ng-show="ctrl.state.DisplayedPanel === 'yaml'">
  <div class="col-lg-12 col-md-12 col-xs-12">
    <rd-widget>
      <rd-widget-header icon="fa-code" title-text="Inspect"></rd-widget-header>
      <rd-widget-body>
        <pre>{{ ctrl.config.Yaml }}</pre>
      </rd-widget-body>
    </rd-widget>
  </div>
</div>