<kubernetes-view-header title="Cluster" state="kubernetes.cluster" view-ready="ctrl.state.viewReady">
  Cluster information
</kubernetes-view-header>

<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>

<div ng-if="ctrl.state.viewReady">
  <div class="row" ng-if="ctrl.isAdmin">
    <div class="col-sm-12">
      <rd-widget>
        <rd-widget-body>
          <form class="form-horizontal" ng-if="ctrl.resourceReservation">
            <kubernetes-resource-reservation
              cpu="ctrl.resourceReservation.CPU"
              cpu-limit="ctrl.CPULimit"
              memory="ctrl.resourceReservation.Memory"
              memory-limit="ctrl.MemoryLimit"
              description="Resource reservation represents the total amount of resource assigned to all the applications inside the cluster."
            >
            </kubernetes-resource-reservation>
          </form>

          <div class="col-sm-12 form-section-title">
            Cluster status
          </div>

          <table class="table">
            <tbody>
              <tr class="text-muted">
                <td style="border-top: none;">Component</td>
                <td style="border-top: none;">Status</td>
                <td style="border-top: none;" ng-if="ctrl.hasUnhealthyComponentStatus">Error</td>
              </tr>
              <tr ng-repeat="cs in ctrl.ComponentStatuses">
                <td>
                  {{ cs.ComponentName }}
                </td>
                <td>
                  <span ng-if="cs.Healthy"><i class="fa fa-check green-icon" aria-hidden="true" style="margin-right: 2px;"></i> healthy</span>
                  <span ng-if="!cs.Healthy"><i class="fa fa-exclamation-circle orange-icon" aria-hidden="true" style="margin-right: 2px;"></i> unhealthy</span>
                </td>
                <td ng-if="ctrl.hasUnhealthyComponentStatus">
                  {{ cs.ErrorMessage !== '' ? cs.ErrorMessage : '-' }}
                </td>
              </tr>
            </tbody>
          </table>
        </rd-widget-body>
      </rd-widget>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <kubernetes-nodes-datatable
        title-text="Nodes"
        title-icon="fa-hdd"
        dataset="ctrl.nodes"
        table-key="kubernetes.nodes"
        order-by="Name"
        refresh-callback="ctrl.getNodes"
        is-admin="ctrl.isAdmin"
      ></kubernetes-nodes-datatable>
    </div>
  </div>
</div>
